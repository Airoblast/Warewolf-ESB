<ribbon:RibbonWindow x:Class="Dev2.Studio.Views.MainView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:ribbon="http://schemas.microsoft.com/winfx/2006/xaml/presentation/ribbon"
                     xmlns:bdsviews="clr-namespace:Unlimited.Applications.BusinessDesignStudio.Views"
                     xmlns:vm="clr-namespace:Dev2.Studio.Core.Interfaces;assembly=Dev2.Studio.Core"
                     xmlns:ap="clr-namespace:Dev2.Studio.AppResources.AttachedProperties"
                     xmlns:igDock="http://infragistics.com/DockManager"
                     xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
                     xmlns:local="clr-namespace:Dev2.Studio.AppResources.Behaviors"
                     xmlns:igExtensions="clr-namespace:Dev2.Studio.Dock"
                     xmlns:cal="clr-namespace:Caliburn.Micro;assembly=Caliburn.Micro"
                     xmlns:dataList="clr-namespace:Dev2.Studio.Views.DataList"
                     xmlns:diagnostics="clr-namespace:Dev2.Studio.Views.Diagnostics"
                     xmlns:explorer="clr-namespace:Dev2.Studio.Views.Explorer"
                     WindowState="Maximized"
                     Title="{Binding Title}"
                     Icon="pack://application:,,,/Dev2.Studio;component/Images/Network.png"
                     Name="MainViewWindow">                   
    <ribbon:RibbonWindow.InputBindings>
        <!--<KeyBinding Command="{Binding Path=NewResourceCommand}" Key="N" Modifiers="Control" />
        <KeyBinding Command="{Binding Path=ExitCommand}" Key="F4" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=SaveCommand}" Key="F6" />        
        <KeyBinding Command="{Binding Path=EditCommand}" Key="E" Modifiers="Control" />-->
        <KeyBinding Command="{Binding Path=DebugCommand}" Key="F5" />
        
        <KeyBinding Command="{Binding Path=NewResourceCommand}" CommandParameter="Source" Key="C" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NewResourceCommand}" CommandParameter="Service" Key="N" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="B" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="S" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="A" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="L" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="W" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="H" Modifiers="Alt" />
        <!-- <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="U" Modifiers="Alt" /> -->
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="P" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=SettingsCommand}" Key="T" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="A" Modifiers="Alt" />
        <KeyBinding Command="{Binding Path=StartFeedbackCommand}" Key="F" Modifiers="Alt" />
        <!--KeyBinding Command="{Binding Path=ThrowExceptionCommand}" Key="E" Modifiers="Alt" /-->

        <KeyBinding Command="{Binding Path=SaveCommand}" Key="S" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=NewResourceCommand}" CommandParameter="Workflow" Key="W" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=RunCommand}" Key="R" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=DeployCommand}" Key="D" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=DebugCommand}" Key="T" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=EditCommand}" Key="I" Modifiers="Ctrl" />
        <!--<KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="X" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="C" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="V" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="Z" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="Y" Modifiers="Ctrl" />-->
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="B" Modifiers="Ctrl" />
        <KeyBinding Command="{Binding Path=NewResourceCommand}" CommandParameter="Unknown" Key="N" Modifiers="Ctrl" />

        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="B" Modifiers="Ctrl+Shift" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="F4" Modifiers="Ctrl+Shift" />
<!--        <KeyBinding Command="{Binding Path=DeployAllCommand}" Key="D" Modifiers="Ctrl+Shift" />-->
        <KeyBinding Command="{Binding Path=NewResourceCommand}"  CommandParameter="DatabaseService" Key="D" Modifiers="Ctrl+Shift" />
        <KeyBinding Command="{Binding Path=NewResourceCommand}"  CommandParameter="ResourceService" Key="P" Modifiers="Ctrl+Shift" />
        <KeyBinding Command="{Binding Path=NotImplementedCommand}" Key="B" Modifiers="Ctrl+Shift" />

    </ribbon:RibbonWindow.InputBindings>
    <Grid>
        <DockPanel AutomationProperties.AutomationId="MainWindow">

            <ItemsControl Name="WorkflowActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Save"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/build2.png"
                                     Command="{Binding Path=SaveCommand}" />
                <!--<ribbon:RibbonButton Label="Deploy" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/database_save.png" Command="{Binding Path=DeployCommand}" />-->
                <ribbon:RibbonButton Label="View in Browser"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/viewinbrowser.png"
                                     Command="{Binding Path=ViewInBrowserCommand}" />
                <ribbon:RibbonButton Label="Debug"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/arrow_right.png"
                                     Command="{Binding Path=DebugCommand}" />
                <ribbon:RibbonButton Label="Edit Properties"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/126_Edit_32x32_72.png"
                                     Command="{Binding Path=EditCommand}" />
            </ItemsControl>

            <ItemsControl Name="ServiceActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Save"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/build2.png"
                                     Command="{Binding Path=SaveCommand}" />
                <ribbon:RibbonButton Label="View in Browser"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/viewinbrowser.png"
                                     Command="{Binding Path=ViewInBrowserCommand}" />
                <ribbon:RibbonButton Label="Debug"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/arrow_right.png"
                                     Command="{Binding Path=DebugCommand}" />
                <ribbon:RibbonButton Label="Edit Properties"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/126_Edit_32x32_72.png"
                                     Command="{Binding Path=EditCommand}" />
            </ItemsControl>

            <ItemsControl Name="WebpageActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="View in Browser"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/viewinbrowser.png"
                                     Command="{Binding Path=ViewInBrowserCommand}" />
                <ribbon:RibbonButton Label="Edit Properties"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/126_Edit_32x32_72.png"
                                     Command="{Binding Path=EditCommand}" />
            </ItemsControl>

            <ItemsControl Name="WebsiteActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="View in Browser"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/viewinbrowser.png"
                                     Command="{Binding Path=ViewInBrowserCommand}" />
                <ribbon:RibbonButton Label="Edit Properties"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/126_Edit_32x32_72.png"
                                     Command="{Binding Path=EditCommand}" />
            </ItemsControl>

            <ItemsControl Name="WorkpartActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Save"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/build2.png"
                                     Command="{Binding Path=SaveCommand}" />
                <ribbon:RibbonButton Label="View in Browser"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/viewinbrowser.png"
                                     Command="{Binding ViewInBrowserCommand}"
                                     AutomationProperties.AutomationId="BrowserCommand" />
                <ribbon:RibbonButton Label="Debug"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/arrow_right.png"
                                     Command="{Binding Path=DebugCommand}" />
                <ribbon:RibbonButton Label="Edit Properties"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/126_Edit_32x32_72.png"
                                     Command="{Binding Path=EditCommand}" />
            </ItemsControl>

            <ItemsControl Name="WizardActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Save"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/build2.png"
                                     Command="{Binding Path=SaveCommand}" />
                <ribbon:RibbonButton Label="View in Browser"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/viewinbrowser.png"
                                     Command="{Binding ViewInBrowserCommand}" />
                <ribbon:RibbonButton Label="Edit Properties"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/126_Edit_32x32_72.png"
                                     Command="{Binding Path=EditCommand}" />
            </ItemsControl>

            <ItemsControl Name="SourceManagerActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="New Source"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Test Source"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Delete Source"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Edit Source"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="ConnectionManagerActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="New Connection"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Test Connections"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Connection Connection"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Save Connection"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Edit Connection"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="ScheduleManagerActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="New Schedule"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Delete Schedule"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Save Schedule"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Edit Schedule"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="PeopleAndSecurityManagerActions" Visibility="Collapsed">
            </ItemsControl>

            <ItemsControl Name="BackupManagerActions" Visibility="Collapsed">
            </ItemsControl>

            <ItemsControl Name="ReportsManagerActions" Visibility="Collapsed">
            </ItemsControl>

            <ItemsControl Name="WebserverManagerActions" Visibility="Collapsed">
            </ItemsControl>

            <ItemsControl Name="SettingsActions" Visibility="Collapsed">
            </ItemsControl>

            <ItemsControl Name="BuyOrBrowseActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Buy"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="SellActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Upload"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="AppStoreAccountActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Save"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="InstalledActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Refresh"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="CommunityAccountActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Save"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="CommunitySearchActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Search"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="HelpSearchActions" Visibility="Collapsed">
                <ribbon:RibbonButton Label="Search"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
                <ribbon:RibbonButton Label="Advanced"
                                     LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png"
                                     Command="{Binding Path=NotImplementedCommand}" />
            </ItemsControl>

            <ItemsControl Name="CommunityActions" Visibility="Collapsed">
            </ItemsControl>

            <ItemsControl Name="DeployActions" Visibility="Collapsed">
            </ItemsControl>

            <ribbon:Ribbon x:Name="ribbon" ShowQuickAccessToolBarOnTop="True" IsCollapsed="False" DockPanel.Dock="Top">
                <ribbon:Ribbon.Resources>
                    <Style TargetType="ribbon:RibbonButton">
                        <Setter Property="ContextMenu" Value="{x:Null}"></Setter>
                    </Style>
                    <Style TargetType="ribbon:RibbonGroup">
                        <Setter Property="ContextMenu" Value="{x:Null}"></Setter>
                        <!-- <Setter Property="AutomationProperties.AutomationId" Value="{Binding RelativeSource={RelativeSource Self}, Path=Label}"></Setter> -->
                    </Style>
                    <Style TargetType="ribbon:RibbonTab">
                        <Setter Property="ContextMenu" Value="{x:Null}"></Setter>

                        <!-- <Setter Property="AutomationProperties.AutomationId" Value="{Binding RelativeSource={RelativeSource Self}, Path=Label}"> -->
                    </Style>

                    <Style TargetType="ribbon:Ribbon">
                        <Setter Property="ContextMenu" Value="{x:Null}"></Setter>
                        <!-- <Setter Property="AutomationProperties.AutomationId" Value="{Binding RelativeSource={RelativeSource Self}, Path=Label}"></Setter> -->
                    </Style>
                    <Style x:Key="RibbonGroupActions">
                        <Style.Triggers>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Unknown">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource" Value="{x:Null}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Workflow">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=WorkflowActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Service">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=ServiceActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Webpage">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=WebpageActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Website">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=WebsiteActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Webpart">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=WorkpartActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Wizard">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=WizardActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="SourceManager">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=SourceManagerActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="ConnectionManager">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=ConnectionManagerActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="ScheduleManager">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=ScheduleManagerActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="PeopleAndSecurityManager">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=PeopleAndSecurityManagerActions}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="BackupManager">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=BackupManagerActions}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="ReportsManager">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=ReportsManagerActions}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="WebserverManager">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=WebserverManagerActions}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Settings">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=SettingsActions}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="BuyOrBrowse">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=BuyOrBrowseActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Sell">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=SellActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="AppstoreAccount">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=AppStoreAccountActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Installed">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=InstalledActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="CommunityAccount">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=CommunityAccountActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="CommunitySearch">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=CommunitySearchActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="HelpSearch">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=HelpSearchActions}" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="Community">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=CommunityActions}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                            <DataTrigger
                                Binding="{Binding DataContext.ActiveItem.WorkSurfaceViewModel.WorkSurfaceContext, ElementName=ribbon}"
                                Value="DeployResources">
                                <Setter Property="ribbon:RibbonGroup.ItemsSource"
                                        Value="{Binding Items, ElementName=DeployActions}" />
                                <Setter Property="ribbon:RibbonGroup.Visibility" Value="Collapsed" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>

                </ribbon:Ribbon.Resources>

                <ribbon:Ribbon.ApplicationMenu>
                    <ribbon:RibbonApplicationMenu AutomationProperties.AutomationId="UI_RibbonApplicationMenu" IsMainMenu="True" HorizontalAlignment="Left">
                        <ribbon:RibbonApplicationMenuItem Header="File" AutomationProperties.AutomationId="UI_RibbonApplicationMenu_File" >
                            <ribbon:RibbonApplicationMenuItem Header="New Workflow" Command="{Binding Path=NewResourceCommand}" CommandParameter="Workflow" AutomationProperties.AutomationId="UI_RibbonApplicationMenu_New" />
                            <ribbon:RibbonApplicationMenuItem Header="New Service" >
<!--                                <ribbon:RibbonApplicationMenuItem Header="Remote Workflow" />-->
                                <ribbon:RibbonApplicationMenuItem Header="Database Procedure" x:Name="NewDatabaseProcedure"  Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="DatabaseService" x:FieldModifier="public" />
                                <ribbon:RibbonApplicationMenuItem Header="Plugin"  Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="ResourceService"/>
                            </ribbon:RibbonApplicationMenuItem>
                            <ribbon:RibbonApplicationMenuItem Header="Add Source"  Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="Source">
                                <ribbon:RibbonApplicationMenuItem Header="Remote Warewolf" Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="Server"/>
                                <ribbon:RibbonApplicationMenuItem Header="Database" Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="DbSource"/>
                                <ribbon:RibbonApplicationMenuItem Header="Plugin" Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="ResourceSource"/>
                            </ribbon:RibbonApplicationMenuItem>
                        </ribbon:RibbonApplicationMenuItem>
                        <ribbon:RibbonApplicationMenuItem Header="Reset Layout" Command="{Binding ResetLayoutCommand}" CommandParameter="{Binding ElementName=dockManager}"/>
                        <ribbon:RibbonApplicationMenuItem Header="Exit" Command="{Binding ExitCommand}" ImageSource="pack://application:,,,/Dev2.Studio;component/Images/Close_Box_Red.png" />
                    </ribbon:RibbonApplicationMenu>
                </ribbon:Ribbon.ApplicationMenu>

                <ribbon:RibbonTab Header="Home" AutomationProperties.AutomationId="Home">
                    <ribbon:RibbonGroup Header="Actions" Style="{StaticResource RibbonGroupActions}">
                        <ribbon:RibbonGroup.ItemTemplate>
                            <DataTemplate>
                                <ribbon:RibbonButton Label="{Binding Label}"
                                                     LargeImageSource="{Binding LargeImageSource}"
                                                     Command="{Binding Command}" />
                            </DataTemplate>
                        </ribbon:RibbonGroup.ItemTemplate>
                    </ribbon:RibbonGroup>

                    <ribbon:RibbonGroup x:Name="HomeCreateNewResource" Header="Create New Resource">
                        <ribbon:RibbonButton Label="Workflow"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/EntityDataModel_NewEntityModelService.png"
                                             Command="{Binding Path=NewResourceCommand}" CommandParameter="Workflow"
                                             AutomationProperties.AutomationId="UI_RibbonHomeTabWorkflowBtn_AutoID" />
                        <ribbon:RibbonButton Label="Database Service"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/EntityDataModel_OtherModelService.png"
                                             Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="DatabaseService" />
                        <ribbon:RibbonButton Label="Plugin Service"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/EntityDataModel_OtherModelService.png"
                                             Command="{Binding Path=NewResourceCommand}"
                                             CommandParameter="ResourceService" />
                        <!--
                        TODO PBI 8291
                        <ribbon:RibbonButton Label="Webpage" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/User.png" Command="{Binding Path=NewResourceCommand}" CommandParameter="HumanInterfaceProcess" />
                        <ribbon:RibbonButton Label="Website" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/webpagebuilder.png" Command="{Binding Path=NewResourceCommand}" CommandParameter="Website" />-->
                        <!--
                        TODO PBI 8142
                        <ribbon:RibbonButton Label="?Webpart?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>-->
                        <!--
                        TODO PBI 8142
                        <ribbon:RibbonButton Label="?Wizard?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>-->
                    </ribbon:RibbonGroup>

                    <ribbon:RibbonGroup Header="Actions">
                        <ribbon:RibbonButton Label="Deploy"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/database_save.png"
                                             Command="{Binding Path=DeployCommand}" />

                        <ribbon:RibbonButton Label="Settings"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/settingsIcon.png"
                                             Command="{Binding Path=SettingsCommand}" />
                    </ribbon:RibbonGroup>
                </ribbon:RibbonTab>


                <!--
                TODO PBIs 800, 5656, 6599, 798, 797, 1027, 4443, 5503, 1018
                <ribbon:RibbonTab Header="Manage">
                    <ribbon:RibbonGroup Header="Actions" Style="{StaticResource RibbonGroupActions}">
                        <ribbon:RibbonGroup.ItemTemplate>
                            <DataTemplate>
                                <ribbon:RibbonButton Label="{Binding Label}" LargeImageSource="{Binding LargeImageSource}" Command="{Binding Command}" />
                            </DataTemplate>
                        </ribbon:RibbonGroup.ItemTemplate>
                    </ribbon:RibbonGroup>
                    
                    <ribbon:RibbonGroup Header="Destinations">
                        TODO 8142 for Source Manager
                        <ribbon:RibbonButton Label="Source Manager" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Web32.png" Command="{Binding Path=NewResourceCommand}" CommandParameter="Source" />
                        <ribbon:RibbonButton Label="?Connection Manager?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Schedule Manager?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?People &amp; Security Manager?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Backup Manager?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Reports Manager?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Webserver Manager?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Settings?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                    </ribbon:RibbonGroup>
                </ribbon:RibbonTab>-->

                <!--
                TODO PBI 2253
                <ribbon:RibbonTab Header="App Store">
                    <ribbon:RibbonGroup Header="Actions" Style="{StaticResource RibbonGroupActions}">
                        <ribbon:RibbonGroup.ItemTemplate>
                            <DataTemplate>
                                <ribbon:RibbonButton Label="{Binding Label}" LargeImageSource="{Binding LargeImageSource}" Command="{Binding Command}" />
                            </DataTemplate>
                        </ribbon:RibbonGroup.ItemTemplate>
                    </ribbon:RibbonGroup>

                    <ribbon:RibbonGroup Header="Destinations">
                        <ribbon:RibbonButton Label="?Buy or Browse?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Sell?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Account?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Installed?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                    </ribbon:RibbonGroup>
                </ribbon:RibbonTab>-->

                <!--
                TODO PBIs 4438, 4435, 4436, 4437
                <ribbon:RibbonTab Header="Community">
                    <ribbon:RibbonGroup Header="Actions" Style="{StaticResource RibbonGroupActions}">
                        <ribbon:RibbonGroup.ItemTemplate>
                            <DataTemplate>
                                <ribbon:RibbonButton Label="{Binding Label}" LargeImageSource="{Binding LargeImageSource}" Command="{Binding Command}" />
                            </DataTemplate>
                        </ribbon:RibbonGroup.ItemTemplate>
                    </ribbon:RibbonGroup>

                    <ribbon:RibbonGroup Header="Destinations">
                        <ribbon:RibbonButton Label="?Account?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                        <ribbon:RibbonButton Label="?Search?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>
                    </ribbon:RibbonGroup>
                </ribbon:RibbonTab>-->

                <ribbon:RibbonTab Header="Help" AutomationProperties.AutomationId="Help">
                    <ribbon:RibbonGroup Header="Actions" Style="{StaticResource RibbonGroupActions}" Visibility="Collapsed">
                        <ribbon:RibbonGroup.ItemTemplate>
                            <DataTemplate>
                                <ribbon:RibbonButton Label="{Binding Label}"
                                                     LargeImageSource="{Binding LargeImageSource}"
                                                     Command="{Binding Command}" />
                            </DataTemplate>
                        </ribbon:RibbonGroup.ItemTemplate>
                    </ribbon:RibbonGroup>

                    <ribbon:RibbonGroup Header="Destinations">
                        <!--
                        TODO 4438, 4435, 4436, 4437
                        <ribbon:RibbonButton Label="?Community?" LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Help.png" Command="{Binding Path=NotImplementedCommand}"/>-->
                        <ribbon:RibbonButton Label="Feedback"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/FeedbackSpeaker.png"
                                             Command="{Binding Path=StartFeedbackCommand}" />
                        <ribbon:RibbonButton Label="Shortcut Keys"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Information.png"
                                             Command="{Binding Path=AddStudioShortcutsPageCommand}" />
                        <ribbon:RibbonButton Label="About"
                                             LargeImageSource="pack://application:,,,/Dev2.Studio;component/Images/Network.png"
                                             Command="{Binding Path=DisplayAboutDialogueCommand}" />
                    </ribbon:RibbonGroup>
                </ribbon:RibbonTab>
            </ribbon:Ribbon>

            <igDock:XamDockManager x:Name="dockManager" AutomationProperties.AutomationId="UI_DocManager_AutoID">
                <i:Interaction.Behaviors>
                    <local:XamlDockManagerLayoutPersistenceBehavior
                        UserInterfaceLayoutRepository="{Binding UserInterfaceLayoutRepository}"
                        LayoutDataPropertyName="MainViewDockingData" LayoutName="Default" />
                </i:Interaction.Behaviors>
                <igDock:DocumentContentHost x:Name="DocumentHost"
                                            AutomationProperties.AutomationId="UI_DocumentHost_AutoID">
                    <igDock:SplitPane x:Name="DockCentre" AutomationProperties.AutomationId="UI_SplitPane_AutoID">
                        <igDock:TabGroupPane x:Name="TabManager"
                                             AutomationProperties.AutomationId="UI_TabManager_AutoID">
                            <i:Interaction.Behaviors>
                                <local:TabGroupPaneBindingBehavior
                                    DocumentHost="{Binding ElementName=DocumentHost}"
                                    SelectedItem="{Binding DataContext.ActiveItem, Mode=TwoWay, ElementName=DocumentHost}">
                                </local:TabGroupPaneBindingBehavior>
                            </i:Interaction.Behaviors>
                            <igExtensions:ContentPaneFactory.PaneFactory>
                                <!-- Binds to the Items property of the DataContext. -->
                                <igExtensions:ContentPaneFactory 
                                    ItemsSource="{Binding Items}"
                                    TabHeaderPath="WorkSurfaceViewModel"
                                    ContentPath="WorkSurfaceViewModel">
                                    <igExtensions:ContentPaneFactory.ContainerStyle>                                    
                                         <Style TargetType="igDock:ContentPane">                                            
                                            <Setter Property="TabHeaderTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal">
                                                            <Image Source="{Binding IconPath}" AutomationProperties.AutomationId="{Binding DisplayName}" Margin="4,4,4,2"></Image>
                                                            <TextBlock Text="{Binding DisplayName}" VerticalAlignment="Center"></TextBlock>                                                            
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                             <Setter Property="ContentTemplate">
                                             <Setter.Value>
                                        <DataTemplate>
                                                        <ContentControl cal:View.Model="{Binding .}"/>
                                        </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                            <Setter Property="AllowDockingBottom" Value="False"/>
                                            <Setter Property="AllowDockingLeft" Value="False"/>
                                            <Setter Property="AllowDockingRight" Value="False"/>
                                            <Setter Property="AllowDockingTop" Value="False"/>
                                            <Setter Property="AutomationProperties.AutomationId" Value="{Binding DisplayName}"/>
                                            <Setter Property="SaveInLayout" Value="false"/>
                                            <Setter Property="cal:Message.Attach" Value="[Event Closing] = [Action CloseWorkSurfaceContext($dataContext, $eventArgs)]"/>                                             
                                        </Style>
                                    </igExtensions:ContentPaneFactory.ContainerStyle>
                                </igExtensions:ContentPaneFactory>
                            </igExtensions:ContentPaneFactory.PaneFactory>
                        </igDock:TabGroupPane>
                    </igDock:SplitPane>
                </igDock:DocumentContentHost>

                <igDock:XamDockManager.Panes>
                    <igDock:SplitPane x:Name="DockBottom" igDock:XamDockManager.InitialLocation="DockedBottom" Height="200">
                        <igDock:TabGroupPane>
                            <igDock:ContentPane x:Name="OutputPane" Header="Output" AllowInDocumentHost="False"
                                                IsPinned="False" AllowClose="False">
                                <diagnostics:DebugOutputView DataContext="{Binding DebugOutputViewModel}"/>
                            </igDock:ContentPane>
                            <!-- TODO PBI 8291 
                            <igDock:ContentPane x:Name="Properties" Header="Properties" AllowClose="False" AllowInDocumentHost="False" IsPinned="True" />
                            <igDock:ContentPane x:Name="Mapping" Header="Mapping" AllowClose="False" AllowInDocumentHost="False" IsPinned="True" />-->

                            </igDock:TabGroupPane>
                    </igDock:SplitPane>

                    <igDock:SplitPane x:Name="DockLeft" igDock:XamDockManager.InitialLocation="DockedLeft" Width="300">
                        <igDock:TabGroupPane>
                            <igDock:ContentPane x:Name="Explorer" Header="Explorer" AllowClose="False"
                                                AllowInDocumentHost="False" IsPinned="False"
                                                AutomationProperties.AutomationId="UI_ExplorerPane_AutoID">
                                <explorer:ExplorerView DataContext="{Binding ExplorerViewModel}"/>
                             </igDock:ContentPane>
                            <igDock:ContentPane x:Name="Toolbox" Header="Toolbox" AllowClose="False"
                                                AllowInDocumentHost="False" IsPinned="False"
                                                AutomationProperties.AutomationId="UI_ToolboxPane_AutoID">
                                <bdsviews:ToolboxUserControl/>
                            </igDock:ContentPane>
                           <igDock:ContentPane x:Name="Variables" 
                                                Header="Variables" AllowClose="False"
                                                AllowInDocumentHost="False" IsPinned="False" >
                                <dataList:DataListView DataContext="{Binding ActiveItem.DataListViewModel}"/>
                            </igDock:ContentPane>
                        </igDock:TabGroupPane>
                    </igDock:SplitPane>
                </igDock:XamDockManager.Panes> 
                <!-- TODO PBI 8291 
                            <igDock:ContentPane x:Name="Properties" Header="Properties" AllowClose="False" AllowInDocumentHost="False" IsPinned="False" />
                            <igDock:ContentPane x:Name="Mapping" Header="Mapping" AllowClose="False" AllowInDocumentHost="False" IsPinned="False" />-->

            </igDock:XamDockManager>
        </DockPanel>

        <!--Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}"-->
        <Button BorderThickness="2" HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,23,5,0" Height="22"
                Focusable="False"
                Visibility="{Binding FeedBackRecorder.IsRecorderAvailable, Converter={StaticResource BoolToVisConverter}}"
                Style="{StaticResource ContentLinkButton}" Command="{Binding StartStopRecordedFeedbackCommand}"
                AutomationProperties.AutomationId="MainView_StartStopFeedbackRecording">
            <Grid>
                <Border Background="Red" Style="{StaticResource FlashingFrameworkElement}"
                        HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                        Visibility="{Binding FeedbackInvoker.CurrentAction, Converter={StaticResource RecorderFeedbackActionTypeToVisibilityConverterPositive}}" />
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Start recording feedback" VerticalAlignment="Center" Margin="5,0,5,0"
                               Visibility="{Binding FeedbackInvoker.CurrentAction, Converter={StaticResource RecorderFeedbackActionTypeToVisibilityConverterNegative}}" />
                    <TextBlock Text="Stop recording feedback" VerticalAlignment="Center" Margin="5,0,5,0"
                               Visibility="{Binding FeedbackInvoker.CurrentAction, Converter={StaticResource RecorderFeedbackActionTypeToVisibilityConverterPositive}}"
                               Style="{StaticResource FlashingFrameworkElement}" />
                    <Image Source="/Images/record.png" Height="16" Width="16" VerticalAlignment="Center"
                           Margin="0,0,5,0"
                           Visibility="{Binding FeedbackInvoker.CurrentAction, Converter={StaticResource RecorderFeedbackActionTypeToVisibilityConverterNegative}}" />
                    <Image Source="/Images/record.png" Height="16" Width="16" VerticalAlignment="Center"
                           Margin="0,0,5,0"
                           Visibility="{Binding FeedbackInvoker.CurrentAction, Converter={StaticResource RecorderFeedbackActionTypeToVisibilityConverterPositive}}"
                           Style="{StaticResource FlashingFrameworkElement}" />
                </StackPanel>
            </Grid>
        </Button>
    </Grid>
</ribbon:RibbonWindow>