<Window x:Class="Unlimited.Applications.BusinessDesignStudio.Views.ChooseActivityWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:navigation="clr-namespace:Dev2.Studio.ViewModels.Navigation"
        Title="Choose your activity..." Height="400" MaxHeight="1000" Width="500" WindowStartupLocation="CenterOwner"
        FocusManager.FocusedElement="{Binding ElementName=txtSearch}">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition  Height="30"/>
            <RowDefinition />
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="5" >
            <TextBox Name="txtSearch" Text="{Binding Path=SearchFilter, UpdateSourceTrigger=PropertyChanged}" MinWidth="200" MaxHeight="20">
                <TextBox.Style>
                    <Style TargetType="TextBox">
                        <Style.Triggers>
                            <Trigger Property="Text" Value="">
                                <Setter Property="Background" Value="{StaticResource SearchHint}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBox.Style>
            </TextBox>
            <Image Grid.Column="1" Source="/images/search.png" Height="16" Width="16" HorizontalAlignment="Right" />
            <Button Command="{Binding Path=RefreshCommand}" Background="Transparent" BorderThickness="0,0,0,0">
                <Image Source="/images/refresh.png" Height="14" Width="14" HorizontalAlignment="Right" />
            </Button>
        </StackPanel>
        <!--<ListView Margin="5" Grid.Row="1" ItemsSource="{Binding Path=Activities}" SelectedItem="{Binding Path=SelectedActivity}" IsSynchronizedWithCurrentItem="True">
            <ListView.ItemTemplate>
                <DataTemplate>
                   <StackPanel Orientation="Horizontal">
                        <Image Source="{Binding Path=IconPath,Converter={StaticResource ImagePathConverter}}" Height="16" Width="16" Margin="5">
                        </Image>
                        <TextBlock TextWrapping="Wrap" HorizontalAlignment="Center" Text="{Binding Path=ToolboxFriendlyName}" Style="{StaticResource ResourceKey=TextFontResizeAnimation}"></TextBlock>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>-->

        <TreeView ItemsSource="{Binding Path=Root.Children}" Grid.Row="1" Grid.ColumnSpan="2">
            <TreeView.ItemContainerStyle>
                <Style TargetType="{x:Type TreeViewItem}">
                    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                    <Setter Property="FontWeight" Value="Normal" />
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="FontWeight" Value="Bold" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TreeView.ItemContainerStyle>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate DataType="{x:Type navigation:AbstractTreeViewModel}" ItemsSource="{Binding Path=Children}" >
                    <StackPanel Mouse.MouseDown="StackPanel_MouseDown">
                        <Grid Margin="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="50*" />
                                <ColumnDefinition Width="100*"/>
                                <ColumnDefinition Width="100*"/>
                            </Grid.ColumnDefinitions>
                        
                            <Image Width="24" Height="24" Margin="3,0" Source="{Binding Path=IconPath, Converter={StaticResource ImagePathConverter}}" />
                            <TextBlock Grid.Column="1" Text="{Binding Name}" Style="{StaticResource ResourceKey=TextFontResizeAnimation}">
                            </TextBlock>
                        </Grid>
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
        <Grid Grid.Row="3" Margin="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="110"/>
                <ColumnDefinition Width="110" />
                <ColumnDefinition Width="110" />
            </Grid.ColumnDefinitions>
            <Button Content="OK"        Command="{Binding Path=OKCommand}" Grid.Row="0" Grid.Column="2" MaxHeight="25" MinWidth="100" HorizontalAlignment="Right" VerticalAlignment="Top" IsDefault="True"/>
            <Button Content="New.."     Command="{Binding Path=NewCommand}" Grid.Row="0" Grid.Column="0" MaxHeight="25" MinWidth="100" HorizontalAlignment="Right" VerticalAlignment="Top"/>
            <Button Content="Edit.."    Command="{Binding Path=EditCommand}" Grid.Row="0" Grid.Column="1" MaxHeight="25" MinWidth="100" HorizontalAlignment="Right" VerticalAlignment="Top" />
            <Button Content="Cancel"    Command="{Binding Path=CancelCommand}" Grid.Row="0" Grid.Column="3" MaxHeight="25" MinWidth="100" HorizontalAlignment="Right" VerticalAlignment="Top" />
        </Grid>
    </Grid>
</Window>
