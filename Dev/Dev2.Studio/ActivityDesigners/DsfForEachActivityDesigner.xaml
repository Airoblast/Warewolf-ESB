<sap:ActivityDesigner x:Class="Unlimited.Applications.BusinessDesignStudio.Activities.DsfForEachActivityDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
    xmlns:sapv="clr-namespace:System.Activities.Presentation.View;assembly=System.Activities.Presentation"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"                     
    xmlns:local="clr-namespace:Dev2.Studio.AppResources.Behaviors"
    xmlns:bds="clr-namespace:Unlimited.Applications.BusinessDesignStudio.Activities"
    xmlns:Dev2="clr-namespace:Dev2.UI" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="115" d:DesignWidth="218"
    xmlns:attachedProperties="clr-namespace:Dev2.Studio.AppResources.AttachedProperties">
    <sap:ActivityDesigner.Icon>
        <DrawingBrush>
            <DrawingBrush.Drawing>
                <ImageDrawing>
                    <ImageDrawing.Rect>
                        <Rect Location="0,0" Size="16,16" ></Rect>
                    </ImageDrawing.Rect>
                    <ImageDrawing.ImageSource>
                        <BitmapImage UriSource="pack://application:,,,/Dev2.Studio;component/Images/loop.png" ></BitmapImage>
                    </ImageDrawing.ImageSource>
                </ImageDrawing>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </sap:ActivityDesigner.Icon>
    <sap:ActivityDesigner.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Create AutomationID">
                <i:Interaction.Behaviors>
                    <local:AutomationIdCreationBehaviour AutomationIdCreation="{Binding Path=ModelItem}" />
                </i:Interaction.Behaviors>
            </MenuItem>
        </ContextMenu>
    </sap:ActivityDesigner.ContextMenu>
    <StackPanel>
        <Grid Width="204">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <Label Content="Recordset or no. " Grid.Row="0" Grid.Column="0" />
            <Dev2:IntellisenseTextBox x:Name="ForEverytxt" DefaultText="[[Recordset()]]" WrapInBrackets="False" Grid.Column="1" Text="{Binding Path=ModelItem.FromDisplayName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" LostFocus="ForEverytxt_LostFocus" Margin="0,2,1,2" MinWidth="101"
                                      attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
                <AutomationProperties.AutomationId>
                    <MultiBinding StringFormat="UI_{0}_RecordsetOrNotxt_AutoID">
                        <Binding Path="ModelItem.AutomationID"/>
                    </MultiBinding>
                </AutomationProperties.AutomationId>
            </Dev2:IntellisenseTextBox>
        </Grid>
        <Border BorderBrush="Black" BorderThickness="1,1,1,1">
            <sap:WorkflowItemPresenter x:Name="DropPoint" AllowDrop="False" HintText="Drop Activity Here" BorderBrush="Black" BorderThickness="2" Item="{Binding Path=ModelItem.DataFunc.Handler, Mode=TwoWay}"  MinHeight="50" 
                                       attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
                <AutomationProperties.AutomationId>
                    <MultiBinding StringFormat="UI_{0}_DropPoint_AutoID">
                        <Binding Path="ModelItem.AutomationID"/>
                    </MultiBinding>
                </AutomationProperties.AutomationId>
            </sap:WorkflowItemPresenter>
        </Border>
    </StackPanel>
</sap:ActivityDesigner>
