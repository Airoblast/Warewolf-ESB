<sap:ActivityDesigner x:Class="Unlimited.Applications.BusinessDesignStudio.Activities.DsfDateTimeActivityDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"                     
    xmlns:local="clr-namespace:Dev2.Studio.AppResources.Behaviors"
    xmlns:dev2="clr-namespace:Dev2.UI"
    xmlns:interfaceImplementors="clr-namespace:Dev2.Studio.InterfaceImplementors"
    xmlns:attachedProperties="clr-namespace:Dev2.Studio.AppResources.AttachedProperties"
                      PreviewMouseDoubleClick="DsfDateTimeActivityDesigner_OnPreviewMouseDoubleClick"
                      MouseEnter="DsfDateTimeActivityDesigner_OnMouseEnter"
                      MouseLeave="DsfDateTimeActivityDesigner_OnMouseLeave">
    <sap:ActivityDesigner.Resources>
        <interfaceImplementors:CalculateIntellisenseTextConverter x:Key="ModelTextConverter" />
    </sap:ActivityDesigner.Resources>
    <sap:ActivityDesigner.Icon>
        <DrawingBrush>
            <DrawingBrush.Drawing>
                <ImageDrawing>
                    <ImageDrawing.Rect>
                        <Rect Location="0,0" Size="16,16" ></Rect>
                    </ImageDrawing.Rect>
                    <ImageDrawing.ImageSource>
                        <BitmapImage UriSource="pack://application:,,,/Warewolf Studio;component/Images/ToolDateTime-32.png" ></BitmapImage>
                    </ImageDrawing.ImageSource>
                </ImageDrawing>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </sap:ActivityDesigner.Icon>  
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Label Content="Input" Name="lblInput" Grid.Column="0" Grid.Row="0"/>
        <dev2:IntellisenseTextBox AllowUserInsertLine="False" Grid.ColumnSpan="2"  
                                  x:Name="txtDateTime" DefaultText="Date Time" FilterType="All" WrapInBrackets="False"
                                  Grid.Column="1" Grid.Row="0" 
                                  Text="{Binding Path=ModelItem.DateTime, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource ModelTextConverter}, ConverterParameter=True}" 
                                  Margin="0,2,1,2" Width="160"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <MultiBinding StringFormat="UI_{0}_Inputtxt_AutoID">
                    <Binding Path="ModelItem.AutomationID"/>
                </MultiBinding>
            </AutomationProperties.AutomationId>
        </dev2:IntellisenseTextBox>
        <Label Content="Input Format" Name="lblInputFormat" Grid.Column="0" Grid.Row="1"/>
        <dev2:IntellisenseTextBox Grid.ColumnSpan="2" x:Name="txtInputFormat" 
                                  DefaultText="d MM yyyy 24h:min.ss sp" FilterType="All" WrapInBrackets="False" 
                                  Grid.Column="1" Grid.Row="1" Text="{Binding Path=ModelItem.InputFormat, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                  Margin="0,2,1,2" Width="160"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <MultiBinding StringFormat="UI_{0}_InputFormattxt_AutoID">
                    <Binding Path="ModelItem.AutomationID"/>
                </MultiBinding>
            </AutomationProperties.AutomationId>
            <dev2:IntellisenseTextBox.IntellisenseProvider>
                <interfaceImplementors:CompositeIntellisenseProvider>
                    <interfaceImplementors:DefaultIntellisenseProvider />
                    <interfaceImplementors:DateTimeIntellisenseProvider />
                </interfaceImplementors:CompositeIntellisenseProvider>
            </dev2:IntellisenseTextBox.IntellisenseProvider>
        </dev2:IntellisenseTextBox>
        <Label Content="Add Time" Name="lblAddTime" Grid.Column="0" Grid.Row="2"/>
        <ComboBox Style ="{StaticResource ActivityComboBoxStyle}" x:Name="cbxTimeModifers" 
                  SelectedValue="{Binding Path=ModelItem.TimeModifierType,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
                  Margin="0,2,1,2"
                  Grid.Column="1" Grid.Row="2" Width="79"
                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True" DropDownClosed="cbxTimeModifers_DropDownClosed">
            <AutomationProperties.AutomationId>
                <MultiBinding StringFormat="UI_{0}_AddTimeTypecbx_AutoID">
                    <Binding Path="ModelItem.AutomationID"/>
                </MultiBinding>
            </AutomationProperties.AutomationId>
        </ComboBox>
        <dev2:IntellisenseTextBox AllowUserInsertLine="False" x:Name="txtTimeMofifierAmount" Grid.Column="2" 
                                  DefaultText="+/- time" 
                                  Text="{Binding Path=ModelItem.TimeModifierAmountDisplay,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                  Grid.Row="2" Margin="2,2,1,2" Width="79"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <MultiBinding StringFormat="UI_{0}_AddTimeAmounttxt_AutoID">
                    <Binding Path="ModelItem.AutomationID"/>
                </MultiBinding>
            </AutomationProperties.AutomationId>
        </dev2:IntellisenseTextBox>        
        <Label Content="Output Format" Name="lblOutputFormat" Grid.Column="0" Grid.Row="3"/>
        <dev2:IntellisenseTextBox AllowUserInsertLine="False" Grid.ColumnSpan="2" 
                                  x:Name="txtOutputFormat" DefaultText="d MM yyyy 24h:min.ss sp" FilterType="All" 
                                  WrapInBrackets="False" Grid.Column="1" Grid.Row="3" 
                                  Text="{Binding Path=ModelItem.OutputFormat, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                  Margin="0,2,1,2" Width="160"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <MultiBinding StringFormat="UI_{0}_OutputFormattxt_AutoID">
                    <Binding Path="ModelItem.AutomationID"/>
                </MultiBinding>
            </AutomationProperties.AutomationId>
            <dev2:IntellisenseTextBox.IntellisenseProvider>
                <interfaceImplementors:CompositeIntellisenseProvider>
                    <interfaceImplementors:DefaultIntellisenseProvider />
                    <interfaceImplementors:DateTimeIntellisenseProvider />
                </interfaceImplementors:CompositeIntellisenseProvider>
            </dev2:IntellisenseTextBox.IntellisenseProvider>            
        </dev2:IntellisenseTextBox>
        <Label Content="Result" Name="lblResult" Grid.Column="0" Grid.Row="4"/>
        <dev2:IntellisenseTextBox AllowUserInsertLine="False" AllowMultilinePaste="False" Grid.ColumnSpan="2" 
                                  x:Name="txtResult" DefaultText="[[NewDateTime]]" FilterType="All" WrapInBrackets="True" 
                                  Grid.Column="1" Grid.Row="4" 
                                  Text="{Binding Path=ModelItem.Result, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                                  Margin="0,2,1,2" Width="160"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <MultiBinding StringFormat="UI_{0}_Resulttxt_AutoID">
                    <Binding Path="ModelItem.AutomationID"/>
                </MultiBinding>
            </AutomationProperties.AutomationId>
        </dev2:IntellisenseTextBox>
    </Grid>
</sap:ActivityDesigner>
