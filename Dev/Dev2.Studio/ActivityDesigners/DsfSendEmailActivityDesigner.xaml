<sap:ActivityDesigner x:Class="Unlimited.Applications.BusinessDesignStudio.Activities.DsfSendEmailActivityDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"   
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"                     
    xmlns:local="clr-namespace:Dev2.Studio.AppResources.Behaviors"
    xmlns:Dev2="clr-namespace:Dev2.UI"    
    xmlns:attachedProperties="clr-namespace:Dev2.Studio.AppResources.AttachedProperties">

    <sap:ActivityDesigner.Icon>
        <DrawingBrush>
            <DrawingBrush.Drawing>
                <ImageDrawing>
                    <ImageDrawing.Rect>
                        <Rect Location="0,0" Size="16,16" ></Rect>
                    </ImageDrawing.Rect>
                    <ImageDrawing.ImageSource>
                        <BitmapImage UriSource="pack://application:,,,/Warewolf Studio;component/Images/EmailIcon.png" ></BitmapImage>
                    </ImageDrawing.ImageSource>
                </ImageDrawing>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </sap:ActivityDesigner.Icon>

    <sap:ActivityDesigner.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Create AutomationID">
                <i:Interaction.Behaviors>
                    <local:AutomationIdCreationBehaviour AutomationIdCreation="{Binding Path=ModelItem}" />
                </i:Interaction.Behaviors>
            </MenuItem>
        </ContextMenu>
    </sap:ActivityDesigner.ContextMenu>

    <Grid Margin="0,0,0,-2">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="90"></ColumnDefinition>
            <ColumnDefinition Width="115"></ColumnDefinition>
            <ColumnDefinition Width="25"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
            <RowDefinition Height="45"></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>

        <Label Content="Mail Source" 
               Grid.Row="0"
               Grid.Column="0"></Label>
        <ComboBox x:Name="CbxSourceBox"
                  Grid.Column="1"
                  Grid.Row="0"
                  Style="{StaticResource Dev2ComboBoxStyle}"   
                  ItemsSource="{Binding ViewModel.EmailSourceList}" 
                  DisplayMemberPath="ResourceName"
                  SelectedItem="{Binding ViewModel.SelectedEmailSource,Mode=TwoWay}"    
                  SelectionChanged="CbxSourceBox_OnSelectionChanged"
                  Margin="0,2,1,2">            
        </ComboBox>
        <Button x:Name="BtnNewSource"
                Content="..."
                Command="{Binding ViewModel.CreateNewEmailSourceCommand}"                
                Grid.Column="2"
                Grid.Row="0"
                Margin="2,2,1,2"
                ToolTip="Create New Email Source"></Button>

        <Label Content="From Account"
               Grid.Column="0"
               Grid.Row="1"></Label>
        <Dev2:IntellisenseTextBox x:Name="TxtFromAcc"
                                  DefaultText="Account or email address"
                                  Text="{Binding ViewModel.FromAccount,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Grid.Column="1"
                                  Grid.Row="1"
                                  Grid.ColumnSpan="2"
                                  Margin="0,2,1,2"
                                  MaxLines="1"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <Binding StringFormat="UI_{0}_fromAcctxt_AutoID" Path="ModelItem.AutomationID"/>
            </AutomationProperties.AutomationId>
        </Dev2:IntellisenseTextBox>

        <Label Content="To"
               Grid.Column="0"
               Grid.Row="2"
               Grid.ColumnSpan="2"></Label>
        <Dev2:IntellisenseTextBox x:Name="TxtTo"
                                  DefaultText="Account or email address"
                                  Text="{Binding ViewModel.To,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Grid.Column="1"
                                  Grid.Row="2"
                                  Grid.ColumnSpan="2"
                                  Margin="0,2,1,2"
                                  MaxLines="1"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <Binding StringFormat="UI_{0}_tostxt_AutoID" Path="ModelItem.AutomationID"/>
            </AutomationProperties.AutomationId>
        </Dev2:IntellisenseTextBox>

        <Label Content="Subject"
               Grid.Column="0"
               Grid.Row="3"
               Grid.ColumnSpan="2"></Label>
        <Dev2:IntellisenseTextBox x:Name="TxtSubject"
                                  DefaultText="Message Subject"
                                  Text="{Binding ViewModel.Subject,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Grid.Column="1"
                                  Grid.Row="3"
                                  Grid.ColumnSpan="2"
                                  Margin="0,2,1,2"
                                  MaxLines="1"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">           
            <AutomationProperties.AutomationId>
                <Binding StringFormat="UI_{0}_subjecttxt_AutoID" Path="ModelItem.AutomationID"/>
            </AutomationProperties.AutomationId>
        </Dev2:IntellisenseTextBox>

        <Label Content="Body"               
               Grid.Column="0"
               Grid.Row="4"></Label>
        <Dev2:IntellisenseTextBox x:Name="TxtBody"
                                  DefaultText="Email Content"
                                  Text="{Binding ViewModel.Body,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Grid.Column="1"
                                  Grid.Row="4"
                                  Grid.ColumnSpan="2"
                                  AllowUserInsertLine="True"
                                  AcceptsTab="True"
                                  MinLines="2"
                                  Margin="0,2,1,2"                                  
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">           
            <AutomationProperties.AutomationId>
                <Binding StringFormat="UI_{0}_bodytxt_AutoID" Path="ModelItem.AutomationID"/>
            </AutomationProperties.AutomationId>
        </Dev2:IntellisenseTextBox>

        <Label Content="Result"               
               Grid.Column="0"
               Grid.Row="5"></Label>
        <Dev2:IntellisenseTextBox x:Name="TxtResult"
                                  DefaultText="Email Content"
                                  Text="{Binding ViewModel.Result,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Grid.Column="1"
                                  Grid.Row="5"
                                  Grid.ColumnSpan="2"                                  
                                  Margin="0,2,1,2" 
                                  MaxLines="1"
                                  WrapInBrackets="True"
                                  attachedProperties:WizardEngineAttachedProperties.DontOpenWizard="True">
            <AutomationProperties.AutomationId>
                <Binding StringFormat="UI_{0}_Resultstxt_AutoID" Path="ModelItem.AutomationID"/>
            </AutomationProperties.AutomationId>
        </Dev2:IntellisenseTextBox>
    </Grid>

</sap:ActivityDesigner>

